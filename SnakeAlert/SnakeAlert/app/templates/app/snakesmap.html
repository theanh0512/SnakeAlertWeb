{% extends "app/layout.html" %}

{% block content %}

    <script
    src="http://maps.googleapis.com/maps/api/js">
    </script>

    <script>
    {% autoescape off %}
    var snakes_list ='{{snakes_json}}';
    {% endautoescape %}
    snakes_list = JSON.parse(snakes_list);
    var lat = snakes_list[0].snakelist.latitude;
    var lng = snakes_list[0].snakelist.longitude;
    var myCenter=new google.maps.LatLng(lat,lng);
    function initialize()
   { 
    var mapProp = {
      center:myCenter,
      zoom:12,
      mapTypeId:google.maps.MapTypeId.TERRAIN
      };

    var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);  
    var info_window = new google.maps.InfoWindow();
    for(var i=0;i<snakes_list.length;i++){
        var lat = snakes_list[i].snakelist.latitude;
        var lng = snakes_list[i].snakelist.longitude;
        var point=new google.maps.LatLng(lat,lng);
        var marker=new google.maps.Marker({
            position: point,
            map: map,
            title: 'Click to zoom'
          });
        // Zoom to 9 when clicking on marker
        google.maps.event.addListener(marker,'click',function() {
            this.map.setZoom(15);
            this.map.setCenter(this.getPosition());
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    info_window.setContent('Hello');
                    info_window.open(map, marker);
                }
            })(marker, i));
    }

    
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <div id="googleMap" style="width:800px;height:600px;"></div>
{% endblock %}
